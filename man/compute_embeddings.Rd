% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/compute_embeddings.R
\name{compute_embeddings}
\alias{compute_embeddings}
\title{Compute Sentence Embeddings}
\usage{
compute_embeddings(
  data,
  text_col = "tv",
  methods = c("sbert"),
  sbert_model = "paraphrase-mpnet-base-v2",
  sbert_dims = 768L,
  gemini_api_key = NULL,
  gemini_model = "gemini-embedding-exp-03-07",
  gemini_dims = 2000L,
  gemini_batch_size = 10L,
  gemini_sleep = 63,
  gemini_task_type = "SEMANTIC_SIMILARITY",
  response_col = "response",
  verbose = TRUE
)
}
\arguments{
\item{data}{A data.frame with a text column}

\item{text_col}{Column containing text to encode (default "tv")}

\item{methods}{Character vector: one or both of "sbert" and "gemini" (default "sbert")}

\item{sbert_model}{SBERT model name (default "paraphrase-mpnet-base-v2")}

\item{sbert_dims}{Number of dimensions in SBERT output (default 768)}

\item{gemini_api_key}{Gemini API key. If NULL, reads from Sys.getenv("GEMINI_API_KEY")}

\item{gemini_model}{Gemini model name (default "gemini-embedding-exp-03-07")}

\item{gemini_dims}{Embedding dimensionality for Gemini (default 2000)}

\item{gemini_batch_size}{Batch size for Gemini API calls (default 10)}

\item{gemini_sleep}{Seconds to sleep between Gemini batches (default 63)}

\item{gemini_task_type}{Gemini task type (default "SEMANTIC_SIMILARITY")}

\item{response_col}{Column used to set embeddings to NA where response is missing (default "response")}

\item{verbose}{Print progress? (default TRUE)}
}
\value{
The input data with embedding columns appended (SBERT_1:SBERT_N and/or Gemini_1:Gemini_N)
}
\description{
Compute sentence embeddings using SBERT and/or Gemini via reticulate.
Generates embeddings for unique text values and joins them back to the data.
SBERT uses the sentence-transformers Python library; Gemini uses the Google
genai Python library with batched API calls and rate limiting.
}
