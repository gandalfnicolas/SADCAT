<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Text Coding Example Guide â€¢ SADCAT</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Text Coding Example Guide">
<meta property="og:description" content="SADCAT">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SADCAT</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Dictionary%20Creation%20Example%20Guide.html">Dictionary Creation Example Guide</a>
    </li>
    <li>
      <a href="../articles/introduction.html">introduction</a>
    </li>
    <li>
      <a href="../articles/Text%20coding%20example%20guide.html">Text Coding Example Guide</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Text Coding Example Guide</h1>
            
      
      
      <div class="hidden name"><code>Text coding example guide.Rmd</code></div>

    </div>

    
    
<p>FOR GUIDE ON HOW TO CREATE DICTIONARIES, SEE Dictionary Creation Example Guide ARTICLE. THIS GUIDE IS AN EXAMPLE OF HOW TO USE THE PACKAGE STEREOTYPE CONTENT DICTIONARIES.</p>
<p>This guide uses a slightly different (simplified) procedure than the paper (Nicolas, Bai, &amp; Fiske, 2020). Primarily, it uses stemming instead of lemmatizing, it allows for multiple coded per response, and it skips things like spellchecking.</p>
<p>To use, examine and understand the structure of the obituaries file, and format your own text responses in the same format. Then replace the appropriate variables to run your text responses through the code provided to obtain all the dictionaries codings.Make sure all packages are properly installed and loaded.</p>
<p>Alternatively, this code also gives you direct access to the dictionaries in the first lines (e.g., SADCAT::Dictionaries), which you can then transfer to your software or approach of choice.</p>
<p>To install packages, remove # and run.</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="co">#install.packages("devtools")</span>
<span class="co"># library(devtools)</span>
<span class="co"># #install_github("gandalfnicolas/SADCAT")</span>
<span class="co"># library(SADCAT)</span>
<span class="co"># #install.packages("quanteda")</span>
<span class="co"># library(quanteda) </span>
<span class="co"># #install.packages("tidyverse")</span>
<span class="co"># library(tidyverse)</span>
<span class="co"># #install.packages("stringr")</span>
<span class="co"># library(stringr)</span>
<span class="co"># #install.packages("psych")</span>
<span class="co"># library(psych)</span></pre></div>
<p>Load dictionaries: Choose long or short version</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="co"># Full_Dictionaries = SADCAT::Dictionaries</span>
<span class="co"># </span>
<span class="co"># Pre_Dictionaries = SADCAT::All.steps_Dictionaries</span>
<span class="co"># </span>
<span class="co"># </span>
<span class="co"># Full_Dictionaries = SADCAT::Dictionaries_FT</span>
<span class="co"># </span>
<span class="co"># Pre_Dictionaries = SADCAT::All.steps_Dictionaries_FT</span></pre></div>
<p>Preprocess dictionaries</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="co"># Include only dictionary entries that are single words</span>
<span class="co"># Pre_Dictionaries$values0 = as.character(Pre_Dictionaries$values0)</span>
<span class="co"># </span>
<span class="co"># Pre_Dictionaries = filter(Pre_Dictionaries, !str_count(Pre_Dictionaries$values0, ' ') &gt; 0)</span>
<span class="co"># </span>
<span class="co"># </span>
<span class="co"># # Stem, and transform into a format suitable for Quanteda. Here, we are only using high directional values of the dictionaries.</span>
<span class="co"># </span>
<span class="co"># Pre_Dictionaries2 = Pre_Dictionaries %&gt;%</span>
<span class="co">#   </span>
<span class="co">#   transmute(values0 = char_wordstem(values0, language = quanteda_options("language_stemmer")),</span>
<span class="co">#          </span>
<span class="co">#          Sociability_dic = ifelse(Sociability_dict == 1, values0, ""),</span>
<span class="co">#          Morality_dic = ifelse(Morality_dict ==1, values0,""),</span>
<span class="co">#          Ability_dic = ifelse(Ability_dict ==1, values0,""),</span>
<span class="co">#          Assertiveness_dic = ifelse(Agency_dict ==1, values0,""),</span>
<span class="co">#          Status_dic = ifelse(Status_dict ==1, values0,""),</span>
<span class="co">#          Warmth_dic = ifelse(Warmth_dict ==1, values0,""),</span>
<span class="co">#          Competence_dic = ifelse(Competence_dict ==1, values0,""),</span>
<span class="co">#          Beliefs_dic = ifelse(Beliefs_dict ==1, values0,""),</span>
<span class="co">#          </span>
<span class="co">#          Sociability_dic_hi = ifelse(Sociability_dict_hi == 1, values0, ""),</span>
<span class="co">#          Morality_dic_hi = ifelse(Morality_dict_hi ==1, values0,""),</span>
<span class="co">#          Ability_dic_hi = ifelse(Ability_dict_hi ==1, values0,""),</span>
<span class="co">#          Assertiveness_dic_hi = ifelse(Agency_dict_hi ==1, values0,""),</span>
<span class="co">#          Status_dic_hi = ifelse(Status_dict_hi ==1, values0,""),</span>
<span class="co">#          Warmth_dic_hi = ifelse(Warmth_dict_hi ==1, values0,""),</span>
<span class="co">#          Competence_dic_hi = ifelse(Competence_dict_hi ==1, values0,""),</span>
<span class="co">#          Beliefs_dic_hi = ifelse(Beliefs_dict_hi ==1, values0,""),</span>
<span class="co">#          </span>
<span class="co">#          Sociability_dic_lo = ifelse(Sociability_dict_lo == 1, values0, ""),</span>
<span class="co">#          Morality_dic_lo = ifelse(Morality_dict_lo ==1, values0,""),</span>
<span class="co">#          Ability_dic_lo = ifelse(Ability_dict_lo ==1, values0,""),</span>
<span class="co">#          Assertiveness_dic_lo = ifelse(Agency_dict_lo ==1, values0,""),</span>
<span class="co">#          Status_dic_lo = ifelse(Status_dict_lo ==1, values0,""),</span>
<span class="co">#          Warmth_dic_lo = ifelse(Warmth_dict_lo ==1, values0,""),</span>
<span class="co">#          Competence_dic_lo = ifelse(Competence_dict_lo ==1, values0,""),</span>
<span class="co">#          Beliefs_dic_lo = ifelse(Beliefs_dict_lo ==1, values0,""),</span>
<span class="co">#          </span>
<span class="co">#          Health_dic = ifelse(health_dict ==1, values0,""),</span>
<span class="co">#          Family_dic = ifelse(relative_dict ==1, values0,""),</span>
<span class="co">#          Emotion_dic = ifelse(feeling_dict ==1, values0,""),</span>
<span class="co">#          Nationality_dic = ifelse(Geography_dict ==1, values0,""),</span>
<span class="co">#          Occupation_dic = ifelse(work_dict ==1, values0,""),</span>
<span class="co">#          Appearance_dic = ifelse(Appearance_dict ==1, values0,"")) %&gt;%</span>
<span class="co">#   </span>
<span class="co">#   dplyr::select(-values0)</span>
<span class="co"># </span>
<span class="co"># </span>
<span class="co"># Dicts_v2 = </span>
<span class="co"># lapply(1:length(Pre_Dictionaries2), function(x) Pre_Dictionaries2[[x]][Pre_Dictionaries2[[x]] != ""])</span>
<span class="co"># </span>
<span class="co"># names(Dicts_v2) = names(Pre_Dictionaries2)</span>
<span class="co"># </span>
<span class="co"># Dicts_v2 = lapply(Dicts_v2, function(x) x[!is.na(x)])</span>
<span class="co"># </span>
<span class="co"># </span>
<span class="co"># #create quanteda dictionaries</span>
<span class="co"># Dicts_v2 = quanteda::dictionary(Dicts_v2)</span></pre></div>
<p>Load example data - examine and change your own data accordingly to match this format.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="co">#obituaries = SADCAT::Obituary_data</span></pre></div>
<p>Some preprocessing of the data</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="co"># obituaries$Beliefs = as.numeric(obituaries$Beliefs)</span>
<span class="co"># </span>
<span class="co"># </span>
<span class="co"># obituaries$Text = tolower(obituaries$Text) #transform to lower case</span>
<span class="co"># </span>
<span class="co"># </span>
<span class="co"># #Preprocess target text</span>
<span class="co"># toks &lt;- quanteda::tokens(obituaries$Text, remove_numbers = T, remove_punct = T, remove_symbols = T)</span>
<span class="co"># </span>
<span class="co"># toks &lt;- tokens_wordstem(toks, language = quanteda_options("language_stemmer"))</span>
<span class="co"># </span>
<span class="co"># string_stemmed= vector()</span>
<span class="co"># for(i in 1:length(toks)){</span>
<span class="co">#   string_stemmed = rbind(string_stemmed, paste(toks[[i]], collapse=' '))</span>
<span class="co"># }</span></pre></div>
<p>Match text data to dictionaries and format</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="co"># #Match target text to dictionaries</span>
<span class="co"># toks_dict_pre &lt;- tokens_lookup(toks, dictionary = Dicts_v2, levels = 1)</span>
<span class="co"># </span>
<span class="co"># </span>
<span class="co"># #Transform to a document-feature dataframe</span>
<span class="co"># toks_dict_pre = convert(dfm(toks_dict_pre), to = "data.frame")</span>
<span class="co"># </span>
<span class="co"># </span>
<span class="co"># #Bind together</span>
<span class="co"># toks_dict = cbind(toks_dict_pre,</span>
<span class="co">#                   ntoken(toks), #raw count</span>
<span class="co">#                   ntype(toks), #distinct count</span>
<span class="co">#                   string_stemmed,</span>
<span class="co">#                   obituaries)</span>
<span class="co"># </span>
<span class="co"># </span>
<span class="co"># #Get percentage of words in the specific text that belong to each dictionary</span>
<span class="co"># toks_dict = toks_dict %&gt;%</span>
<span class="co">#   mutate_at(vars(sociability_dic:appearance_dic), .funs = list(percent = ~(./`ntoken(toks)`)))</span>
<span class="co"># </span>
<span class="co"># </span>
<span class="co"># #Get binary indicator: is dictionary in text or not?</span>
<span class="co"># toks_dict = toks_dict %&gt;%</span>
<span class="co">#   mutate_at(vars(sociability_dic:appearance_dic), .funs = list(binary = ~ifelse(. &gt; 0 , 1, 0)))</span>
<span class="co"># </span>
<span class="co"># </span>
<span class="co"># #Create direction indicators</span>
<span class="co"># toks_dict = toks_dict %&gt;%</span>
<span class="co">#   mutate(sociability_dir = sociability_dic_hi - sociability_dic_lo,</span>
<span class="co">#          morality_dir = morality_dic_hi - morality_dic_lo,</span>
<span class="co">#          ability_dir =  ability_dic_hi - ability_dic_lo,</span>
<span class="co">#          assertiveness_dir = assertiveness_dic_hi - assertiveness_dic_lo,</span>
<span class="co">#          status_dir = status_dic_hi - status_dic_lo,</span>
<span class="co">#          warmth_dir = warmth_dic_hi - warmth_dic_lo,</span>
<span class="co">#          competence_dir = competence_dic_hi - competence_dic_lo,</span>
<span class="co">#          beliefs_dir = beliefs_dic_hi - beliefs_dic_lo</span>
<span class="co">#          )</span></pre></div>
<p>Write data</p>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="co">#write.csv(toks_dict, "obituaries dict.csv")</span></pre></div>
<p>Example analysis</p>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="co"># Sociability_mod = lm(Sociability ~ sociability_dir,data =  toks_dict)</span>
<span class="co"># summary(Sociability_mod)</span></pre></div>
<div id="variables" class="section level4">
<h4 class="hasAnchor">
<a href="#variables" class="anchor"></a>Variables:</h4>
</div>
<div id="dic-variables-indicate-how-many-words-in-the-text-were-coded-into-that-dimension-regardless-of-whether-the-response-is-high-or-low-e-g--for-sociability-both-friendly-and-unfriendly-are-counted" class="section level1">
<h1 class="hasAnchor">
<a href="#dic-variables-indicate-how-many-words-in-the-text-were-coded-into-that-dimension-regardless-of-whether-the-response-is-high-or-low-e-g--for-sociability-both-friendly-and-unfriendly-are-counted" class="anchor"></a>_dic variables indicate how many words in the text were coded into that dimension, regardless of whether the response is high or low (e.g., for sociability, both friendly and unfriendly are counted)</h1>
</div>
<div id="dic_hi-and-_dic_lo-variables-indicate-how-many-words-in-the-text-were-coded-as-being-high-and-low-respectively-on-the-dimension-if-the-word-is-not-in-the-dimension-it-is-not-counted-here" class="section level1">
<h1 class="hasAnchor">
<a href="#dic_hi-and-_dic_lo-variables-indicate-how-many-words-in-the-text-were-coded-as-being-high-and-low-respectively-on-the-dimension-if-the-word-is-not-in-the-dimension-it-is-not-counted-here" class="anchor"></a>_dic_hi and _dic_lo variables indicate how many words in the text were coded as being high and low (respectively) on the dimension (if the word is not in the dimension, it is not counted here)</h1>
</div>
<div id="dic_percent-is-simply-the-_dic-variable-divided-by-the-total-number-of-words-in-the-text-so-percentage-of-words-in-the-text-coded-into-the-dimension" class="section level1">
<h1 class="hasAnchor">
<a href="#dic_percent-is-simply-the-_dic-variable-divided-by-the-total-number-of-words-in-the-text-so-percentage-of-words-in-the-text-coded-into-the-dimension" class="anchor"></a>_dic_percent is simply the _dic variable divided by the total number of words in the text (so, percentage of words in the text coded into the dimension)</h1>
</div>
<div id="dic_binary-indicates-whether-the-text-includes-the-dimension-at-all-0-no-1-yes" class="section level1">
<h1 class="hasAnchor">
<a href="#dic_binary-indicates-whether-the-text-includes-the-dimension-at-all-0-no-1-yes" class="anchor"></a>_dic_binary indicates whether the text includes the dimension at all, 0 = No, 1 = yes</h1>
</div>
<div id="dir-indicates-the-direction-of-the-dimension-in-the-text--it-is-calculated-as-dic_hi---dic_lo-thus-higher-scores-indicate-more-high-directional-words-in-the-text-for-that-dimension-lower-scores-indicate-more-low-directional-words-in-the-text-for-that-dimension--a-score-of-0-indicates-either-equal-number-of-words-in-the-dimension-or-no-words-related-to-the-dimension-thus-no-directional-bias-" class="section level1">
<h1 class="hasAnchor">
<a href="#dir-indicates-the-direction-of-the-dimension-in-the-text--it-is-calculated-as-dic_hi---dic_lo-thus-higher-scores-indicate-more-high-directional-words-in-the-text-for-that-dimension-lower-scores-indicate-more-low-directional-words-in-the-text-for-that-dimension--a-score-of-0-indicates-either-equal-number-of-words-in-the-dimension-or-no-words-related-to-the-dimension-thus-no-directional-bias-" class="anchor"></a>_dir indicates the direction of the dimension in the text. It is calculated as dic_hi - dic_lo, thus higher scores indicate more high-directional words in the text for that dimension, lower scores indicate more low-directional words in the text for that dimension. A score of 0 indicates either equal number of words in the dimension or no words related to the dimension (thus no directional bias).</h1>
<p>#**** Please review paper to understand how the different dimensions are define and constructed, many overlap. (<a href="https://onlinelibrary.wiley.com/doi/10.1002/ejsp.2724" class="uri">https://onlinelibrary.wiley.com/doi/10.1002/ejsp.2724</a>)</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Gandalf Nicolas.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
